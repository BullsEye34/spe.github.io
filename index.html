
<html>
    	<link rel="shortcut icon" href="http://www.sunpvenergy.com/wp-content/uploads/2017/09/small-2.png" type="image/x-icon" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<!--<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">-->
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-indigo.min.css" /> 

<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

<title>
    
    SunPVEnergy Login
</title>
<body>
    <center>
        <h4 style="color: #fff;"><img src="logo-1.png"><br><br>Login</h4>
    <form id="myForm" action="#">
  <div class="mdl-textfield mdl-js-textfield">
    <input class="mdl-textfield__input" type="text" id="username" name="username">
    <label class="mdl-textfield__label" for="username" >Username</label>
  </div>
        <br>
          <div class="mdl-textfield mdl-js-textfield">
              <input class="mdl-textfield__input" type="password" id="password" name="password">
    <label class="mdl-textfield__label" for="password">Password</label>
  </div>
        <br>
        <button type="button" onclick="submitit()" id="btn-submit" name="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"><!--type="submit"-->
  Submit
</button>
        
       <!-- <button name="reset" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" type="reset">
  Reset
</button>-->
</form>
<a href="mailto:ravi@sunpvenergy.com?Subject=Hello SunPV Energy, I need some help!">Having Trouble? Please Write to us</a>

<div id="token"></div>
        </center>
    </body>

</html>

<script>
        function submitit(){
        const url = 'https://vrmapi.victronenergy.com';
        var Http = new XMLHttpRequest();
        Http.open("POST", url + '/v2/auth/login');
        var tokenElement = document.getElementById('token');
        var userElement = document.getElementById('username');
        var passwordElement = document.getElementById('password');
        Http.setRequestHeader("Content-Type", "application/json");
        Http.onload = function(){
        var tok = JSON.parse(Http.response);
        var token = tok["token"];
        console.log(token);
        if(tok.token){
            tokenElement.innerHTML ="<p style=\" font-size: 1px;\">" + tok.token + "</p>";
        }else{
            tokenElement.innerHTML = "No Token Recieved";
        }
    }
    var sendObject = JSON.stringify({
    username: userElement.value,
    password: passwordElement.value
    });
    
    console.log('going to send', sendObject);
    
    Http.send(sendObject);
    
    }
    </script>



<style>
    html{
        height: auto;
        padding-top: 30%;
        overflow-y: hidden;
    }
    a{
        color: grey;
    }
   
@media only screen and (min-width: 600px){
        html{
            padding-top: 10%;
            background: url('bg.svg');
            /*background-size: 80%;*/
            background-attachment: fixed;
            background-repeat: no-repeat;
            background-position: bottom right;
            overflow-y: hidden;

        }
    }
</style>